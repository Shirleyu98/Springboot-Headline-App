import{_ as D,g as V,u as P,p as H,a as M,r as i,w as $,o as q,b as d,c as l,d as c,e as s,F as E,f as U,h as g,i as j,j as F,t as r,k as u,l as _,m as z,n as C,q as x,s as L,E as O}from"./index-ae5aa42a.js";const W={class:"container"},R={class:"listItem"},T={class:"text"},A={class:"detail"},G={style:{"margin-top":"20px"}},J=j({name:"HeadlineNews"}),K=Object.assign(J,{setup(Q){const{Bus:f}=V().appContext.config.globalProperties,N=P(H),v=M(),y=N.uid,a=i({keyWords:"",type:0,pageNum:1,pageSize:5}),b=i(0),m=i([{hid:null,pageViews:null,pastHours:null,publisher:null,title:"",type:null}]);f.on("keyword",t=>{a.value.keyWords=t}),f.on("tid",t=>{a.value.type=t}),$(()=>a.value,()=>{o()},{deep:!0});const o=async()=>{let t=await F(a.value);m.value=t.pageInfo.pageData,a.value.pageNum=t.pageInfo.pageNum,a.value.pageSize=t.pageInfo.pageSize,b.value=+t.pageInfo.totalSize};q(()=>{o()});const h=t=>{v.push({name:"Detail",query:{hid:t}})},w=async t=>{await L(t),O.success("删除成功!"),o()},I=t=>{v.push({name:"addOrModifyNews",query:{hid:t}})};return(t,n)=>{const p=d("el-button"),S=d("el-popconfirm"),B=d("el-pagination");return l(),c("div",W,[s("div",R,[(l(!0),c(E,null,U(m.value,e=>(l(),c("div",{class:"containerItem",key:e.hid},[s("div",null,[s("span",T,r(e.title),1)]),s("div",A,[s("span",null,r(e.type==1?"新闻":e.type==2?"体育":e.type==3?"娱乐":e.type==4?"科技":"其他"),1),s("span",null,r(e.pageViews)+"浏览",1),s("span",null,r(e.pastHours)+"小时前",1)]),s("div",null,[g(p,{onClick:k=>h(e.hid),size:"small",style:{background:"#198754","margin-left":"15px",color:"#bbd3dc"}},{default:u(()=>n[2]||(n[2]=[_("查看全文")])),_:2},1032,["onClick"]),e.publisher==z(y)?(l(),C(S,{key:0,onConfirm:k=>w(e.hid),title:`您确定要删除${e.title}吗?`},{reference:u(()=>[g(p,{size:"small",style:{background:"#dc3545",color:"#bbd3dc"}},{default:u(()=>n[3]||(n[3]=[_("删除")])),_:1})]),_:2},1032,["onConfirm","title"])):x("",!0),e.publisher==z(y)?(l(),C(p,{key:1,onClick:k=>I(e.hid),size:"small",style:{background:"#212529",color:"#bbd3dc"}},{default:u(()=>n[4]||(n[4]=[_("修改")])),_:2},1032,["onClick"])):x("",!0)])]))),128)),s("div",G,[g(B,{"current-page":a.value.pageNum,"onUpdate:currentPage":n[0]||(n[0]=e=>a.value.pageNum=e),"page-size":a.value.pageSize,"onUpdate:pageSize":n[1]||(n[1]=e=>a.value.pageSize=e),onSizeChange:o,onCurrentChange:o,"page-sizes":[5,7,10],background:"",layout:"prev, pager, next , ->, sizes, total",total:b.value},null,8,["current-page","page-size","total"])])])])}}}),Y=D(K,[["__scopeId","data-v-64c5e8b2"]]);export{Y as default};
